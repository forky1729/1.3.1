# я не учитываю погрешность массы, потому что ЭтО сЛоЖнО
"""
#1 =========================================================================================

#основные данные
r = 15 #mm
h = 1334 #mm
gn = 0.1 #cm
gh = 0.1 #cm
s = 0.166 #mm^2
gs = 0.005 #mm^2
l = 176.8 #cm
gl = 0.1 #cm

def dl(n):
  return (n*r/(2*h))

def gdl(l0, n):
  return (l0*((gn/n)**2 + (gh/h)**2)**(1/2))

#удлинение проволоки
n1 = [17.7, 20.3, 22.8, 27.6, 25.2, 22.7, 20.1, 17.6]
m1 = [946.2, 1191.9, 1437.5, 1928.4, 1682.8, 1437.5, 1191.9, 946.2]
n2 = [17.8, 22.7, 27.6, 29.9, 31.8, 34.5, 32.2, 29.9, 25.2, 20.4, 17.8]
m2 = [946.2, 1437.5, 1928.4, 2173.9, 2419.1, 2664.7, 2419.1, 2173.9, 1682.8, 1191.9, 946.2]
n3 = [20.3, 25.2, 29.9, 32.2, 34.6, 39.2, 37.0, 32.4, 30.0, 25.2, 20.3]
m3 = [1191.9, 1682.8, 2173.9, 2419.1, 2664.7, 3154.6, 2909.1, 2419.1, 2173.9, 1682.8, 1191.9]

sr_xy = 0
sr_x = 0
sr_y = 0
sr_xsqr = 0
sr_ysqr = 0
j = len(n1) + len(n2) + len(n3)

for i in range (0, len(n1)):
  print("dl", i, "=", dl(n1[i])*10, "mm", "      gdl", i, "=", gdl(dl(n1[i]), n1[i])*10, "mm")
  sr_xy += (9.81*m1[i]/1000)*(dl(n1[i])/100)
  sr_x += dl(n1[i])/100
  sr_y += 9.81*m1[i]/1000
  sr_xsqr += (dl(n1[i])/100)**2
  sr_ysqr += (9.81*m1[i]/1000)**2
  
for i in range (0, len(n2)):
  print("dl", i, "=", dl(n2[i])*10, "mm", "      gdl", i, "=", gdl(dl(n2[i]), n2[i])*10, "mm")
  sr_xy += (9.81*m2[i]/1000)*(dl(n2[i])/100)
  sr_x += dl(n2[i])/100
  sr_y += 9.81*m2[i]/1000
  sr_xsqr += (dl(n2[i])/100)**2
  sr_ysqr += (9.81*m2[i]/1000)**2
  
for i in range (0, len(n3)):
  print("dl", i, "=", dl(n3[i])*10, "mm", "      gdl", i, "=", gdl(dl(n3[i]), n3[i])*10, "mm")
  sr_xy += (9.81*m3[i]/1000)*(dl(n3[i])/100)
  sr_x += dl(n3[i])/100
  sr_y += 9.81*m3[i]/1000
  sr_xsqr += (dl(n3[i])/100)**2
  sr_ysqr += (9.81*m3[i]/1000)**2

sr_xy = sr_xy/j
sr_x = sr_x/j
sr_y = sr_y/j
sr_xsqr = sr_xsqr/j
sr_ysqr = sr_ysqr/j

k = (sr_xy - sr_x*sr_y)/(sr_xsqr - sr_x**2)
gk = ((1/(len(n1) + len(n2) + len(n3)))*((sr_ysqr-sr_y**2)/(sr_xsqr - sr_x**2)-k**2))**(1/2)
print("k =", k, "+-", gk)

E = k*l*0.01/(s*0.000001)
gE = E*((gs/s)**2+(gl/l)**2+(gk/k)**2)**(1/2)
print("E =", E/10000000000, " +-", gE/10000000000, "*10^10")

#получается, что проволока медная (стр.297)
"""

# 2 =========================================================================================

lAB = 50.3*0.01 #m
dlAB = 0.1*0.01 #m


#размеры балок
a1 = [21.5, 21.3, 21.0, 20.9, 21.2, 21.4, 21.2, 21.0, 21.3, 21.2]
b1 = [3.81, 3.8, 3.81, 3.87, 3.87, 3.83, 3.85, 3.8, 3.81, 3.87]
a2 = [21.5, 21.5, 21.4, 21.6, 21.4, 21.5, 21.5, 21.5, 21.5, 21.4]
b2 = [3.92, 3.92, 3.93, 3.93, 3.92, 3.92, 3.93, 3.91, 3.93, 3.92]
a3 = [19.3, 19.1, 19.2, 19.2, 19.1, 19.3, 19.1, 19.1, 19.3, 19.3]
b3 = [10.31, 10.19, 10.22, 10.31, 10.23, 10.17, 10.20, 10.16, 10.31, 10.18]

size = [a1, b1, a2, b2, a3, b3]

a1_s = 0
b1_s = 0
a2_s = 0
b2_s = 0
a3_s = 0
b3_s = 0

ga1_s = 0
gb1_s = 0
ga2_s = 0
gb2_s = 0
ga3_s = 0
gb3_s = 0

for i in range (0, 10):
  a1_s += a1[i]
  b1_s += b1[i]
  a2_s += a2[i]
  b2_s += b2[i]
  a3_s += a3[i]
  b3_s += b3[i]

a1_r = a1_s/10
b1_r = b1_s/10
a2_r = a2_s/10
b2_r = b2_s/10
a3_r = a3_s/10
b3_r = b3_s/10

for i in range (0, 10):
  ga1_s += abs(a1_r - a1[i])
  gb1_s += abs(b1_r - b1[i])
  ga2_s += abs(a2_r - a2[i])
  gb2_s += abs(b2_r - b2[i])
  ga3_s += abs(a3_r - a3[i])
  gb3_s += abs(b3_r - b3[i])

ga1_r = ga1_s/10
gb1_r = gb1_s/10
ga2_r = ga2_s/10
gb2_r = gb2_s/10
ga3_r = ga3_s/10
gb3_r = gb3_s/10

#print(a1_r, b1_r, a2_r, b2_r, a3_r, b3_r)
#print(ga1_r, gb1_r, ga2_r, gb2_r, ga3_r, gb3_r)

y01 = 0.41 #mm      
y02 = 0.08 #mm      
y03 = 0.44 #mm      
y04 = 0.06 #mm      
y05 = 0.50 #mm      
y06 = 0.07 #mm      
y07 = 0.94 #mm      
y08 = 0.61 #mm      

y0 = [y01, y02, y03, y04, y05, y06, y07, y08]

m0 = 54.5 #g

# E = (P/y_max==f)*(l**3/(4*a*b**3))
# dE = E*((3*dlAB/lAB)**2 + (da/a)**2 + (3*db/b)**2 + (df/f)**2)**(1/2)
# найти для каждого случая: da, a, db, b, df, f

size_s = [0, 0, 0, 0, 0, 0]

for i in range (0, 6):
  sum_s = 0
  for h in range (0, 10):
    sum_s += size [i][h]
  size_s [i] = sum_s/10

#print(size_s)

dsize_s = [0, 0, 0, 0, 0, 0]

for i in range (0, 6):
  dsum_s = 0
  for h in range (0, 10):
    dsum_s += abs(size_s[i] - size [i][h])
  dsize_s [i] = dsum_s/10

#print(dsize_s)

m1 = [504.5, 1001.7, 1510.4, 2012.4, 2512.4, 3015.4, 2512.4, 2012.4, 1510.4, 1001.7, 504.5]
y1 = [1.09, 1.77, 2.47, 3.16, 3.85, 4.55, 3.86, 3.18, 2.48, 1.79, 1.11]

m2 = [504.5, 1013.2, 1516.2, 2012.4, 2515.9, 2013.1, 2519.9, 2012.4, 1516.2, 1013.2, 504.5]
y2 = [0.76, 1.46, 2.17, 2.86, 3.56, 4.26, 3.60, 2.90, 2.23, 1.55, 0.84]

m3 = [497.2, 1001.7, 1504.7, 2006.7, 2502.9, 3006.4, 2502.9, 2006.7, 1504.7, 1001.7, 497.2]
y3 = [1.10, 1.84, 2.52, 3.23, 3.91, 4.63, 3.95, 3.27, 2.58, 1.89, 1.18]

m4 = [497.2, 1001.7, 1504.7, 2006.7, 2502.9, 3006.4, 2502.9, 2006.7, 1504.7, 1001.7, 497.2]
y4 = [0.76, 1.47, 2.17, 2.89, 3.56, 4.30, 3.62, 2.95, 2.24, 1.56, 0.87]

m5 = [497.2, 1001.7, 1504.7, 2000.9, 2502.9, 2000.9, 1504.7, 1001.7, 497.2]
y5 = [1.70, 2.95, 4.21, 5.41, 6.65, 5.45, 4.22, 2.97, 1.73]

m6 = [497.2, 1001.7, 1504.7, 2000.9, 2502.9, 2000.9, 1504.7, 1001.7, 497.2]
y6 = [1.19, 2.47, 3.69, 4.89, 6.11, 4.91, 3.72, 2.54, 1.30]

m7 = [497.2, 1001.7, 1504.7, 2000.9, 2502.9, 3006.4, 2502.9, 2000.9, 1504.7, 1001.7, 497.2]
y7 = [1.51, 2.12, 2.72, 3.31, 3.91, 4.49, 3.94, 3.36, 2.78, 2.20, 1.61]

m8 = [497.2, 1001.7, 1504.7, 2000.9, 2502.9, 3006.4, 2502.9, 2000.9, 1504.7, 1001.7, 497.2]
y8 = [1.22, 1.85, 2.46, 3.04, 3.67, 4.26, 3.71, 3.11, 2.52, 1.91, 1.30]

m = [m1, m2, m3, m4, m5, m6, m7, m8]
y = [y1, y2, y3, y4, y5, y6, y7, y8]

f = [0, 0, 0, 0, 0, 0, 0, 0]
df = [0, 0, 0, 0, 0, 0, 0, 0]


for i in range (0,8):
  sr_xy = 0
  sr_x = 0
  sr_y = 0
  sr_xsqr = 0
  sr_ysqr = 0
  for j in range (0,len(m[i])):
    sr_xy = 9.81*(m0 + m[i][j])*0.001*(y[i][j]-y0[i])*0.001
    sr_x = (y[i][j]-y0[i])*0.001
    sr_y = 9.81*(m0 + m[i][j])*0.001
    sr_xsqr = ((y[i][j]-y0[i])*0.001)**2
    sr_ysqr = (9.81*(m0 + m[i][j])*0.001)**2
  sr_xy = sr_xy/len(m[i])
  sr_x = sr_x/len(m[i])
  sr_y = sr_y/len(m[i])
  sr_xsqr = sr_xsqr/len(m[i])
  sr_ysqr = sr_ysqr/len(m[i])
  f[i] = (sr_xy - sr_x*sr_y)/(sr_xsqr - sr_x**2)
  df[i] = ((1/len(m[i]))*((sr_ysqr-sr_y**2)/(sr_xsqr - sr_x**2)-f[i]**2))**(1/2)

print("f =", f)
print("df =", df)


E = [0, 0, 0, 0, 0, 0, 0, 0]
dE = [0, 0, 0, 0, 0, 0, 0, 0]


for i in range (0,8):
  if str(i) in "0123":
    E[i]= (f[i]*(lAB**3/(4*size_s[0]*0.001*(size_s[1]*0.001)**3)))/10000000000
    dE[i] = (E[i]*((3*dlAB/lAB)**2 + (dsize_s[0]/size_s[0])**2 + (3*dsize_s[1]/size_s[1])**2 + (df[i]/f[i])**2)**(1/2))
  elif str(i) in "45":
    E[i]= (f[i]*(lAB**3/(4*size_s[2]*0.001*(size_s[3]*0.001)**3)))/10000000000
    dE[i] = (E[i]*((3*dlAB/lAB)**2 + (dsize_s[2]/size_s[2])**2 + (3*dsize_s[3]/size_s[3])**2 + (df[i]/f[i])**2)**(1/2))
  elif str(i) in "67":
    E[i]= (f[i]*(lAB**3/(4*size_s[4]*0.001*(size_s[5]*0.001)**3)))/10000000000
    dE[i] = (E[i]*((3*dlAB/lAB)**2 + (dsize_s[4]/size_s[4])**2 + (3*dsize_s[5]/size_s[5])**2 + (df[i]/f[i])**2)**(1/2))

print("E =", E)
print("dE =", dE)
# первая палка - железо
# вторая палка - латунь, немного попадает в медь, но это не важно
# третья палка - дубовая
